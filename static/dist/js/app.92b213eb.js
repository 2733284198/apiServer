(function(t){function e(e){for(var n,i,o=e[0],c=e[1],l=e[2],d=0,f=[];d<o.length;d++)i=o[d],s[i]&&f.push(s[i][0]),s[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(e);while(f.length)f.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],n=!0,o=1;o<a.length;o++){var c=a[o];0!==s[c]&&(n=!1)}n&&(r.splice(e--,1),t=i(i.s=a[0]))}return t}var n={},s={app:0},r=[];function i(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=n,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(a,n,function(e){return t[e]}.bind(null,n));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var u=c;r.push([1,"chunk-vendors"]),a()})({0:function(t,e){},1:function(t,e,a){t.exports=a("56d7")},2:function(t,e){},2388:function(t,e,a){},"2b63":function(t,e,a){},"2e21":function(t,e,a){"use strict";var n=a("bc30"),s=a.n(n);s.a},3:function(t,e){},"355a":function(t,e,a){},4678:function(t,e,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=r(t);return a(e)}function r(t){var e=n[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}s.keys=function(){return Object.keys(n)},s.resolve=r,t.exports=s,s.id="4678"},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a-locale-provider",{attrs:{locale:t.locale}},[n("div",{attrs:{id:"app"}},[n("div",{staticClass:"header"},[n("img",{attrs:{src:a("9b19"),alt:"BOX"}})]),n("div",{staticClass:"content"},[n("Home")],1)])])},r=[],i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"contain"},[a("a-steps",{attrs:{current:t.current}},t._l(t.steps,function(t){return a("a-step",{key:t.index,attrs:{title:t.title,size:"small"}})})),a("div",{staticClass:"form-content"},[a("InputTransfer",{directives:[{name:"show",rawName:"v-show",value:t.inputStatus,expression:"inputStatus"}],on:{getStatus:t.getStatus}}),t.inputStatus?t._e():a("ViewTransfer",{on:{getStatus:t.getStatus}})],1)],1)},o=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",[a("a-form-item",{attrs:{label:"币种",labelCol:{span:5},wrapperCol:{span:12}}},[a("a-select",{attrs:{placeholder:"请选择",allowClear:!0,value:t.currencySelect},on:{change:this.currencySelectChange}},t._l(t.currencyList,function(e,n){return a("a-select-option",{key:n,attrs:{value:n}},[t._v(t._s(e.Name+"("+e.FullName+")"))])})),void 0!==t.templateSelect?a("span",{staticClass:"blance"},[t._v("剩余额度："+t._s(t.balance))]):t._e()],1),a("a-form-item",{attrs:{label:"审批流",labelCol:{span:5},wrapperCol:{span:12}}},[a("a-select",{attrs:{placeholder:"请选择",allowClear:!0,value:t.templateSelect},on:{change:this.templateSelectChange}},t._l(t.templateList,function(e,n){return a("a-select-option",{key:n,attrs:{value:n}},[t._v(t._s(e.Name))])}))],1),a("a-form-item",{attrs:{labelCol:{span:5},wrapperCol:{span:12},label:"申请理由"}},[a("a-textarea",{attrs:{placeholder:"请输入200字以内的申请理由…",rows:4},model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}})],1),a("a-form-item",{attrs:{label:"截止时间（选填）",labelCol:{span:5},wrapperCol:{span:12}}},[a("a-col",{attrs:{span:11}},[a("a-form-item",[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择日期"},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1)],1),a("a-col",{attrs:{span:2}},[a("span",{style:{display:"inline-block",width:"100%",textAlign:"center"}})]),a("a-col",{attrs:{span:11}},[a("a-form-item",[a("a-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间"},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})],1)],1)],1),a("a-form-item",{attrs:{label:"矿工费",labelCol:{span:5},wrapperCol:{span:16}}},[a("a-radio-group",{attrs:{name:"radioGroup",defaultValue:1,size:"small"},model:{value:t.miner,callback:function(e){t.miner=e},expression:"miner"}},[a("a-radio",{attrs:{value:1}},[t._v("最低")]),a("a-radio",{attrs:{value:2}},[t._v("2倍")]),a("a-radio",{attrs:{value:3}},[t._v("3倍")]),a("a-radio",{attrs:{value:4}},[t._v("4倍")]),a("a-radio",{attrs:{value:5}},[t._v("5倍")]),a("a-radio",{attrs:{value:10}},[t._v("10倍")])],1)],1),a("a-form-item",{staticClass:"transfer-info",attrs:{label:"转账信息",labelCol:{span:5},wrapperCol:{span:18}}},[a("input",{ref:"file_up",attrs:{type:"file",id:"up-file",accept:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"},domProps:{value:t.fileValue},on:{input:t.handleChange}}),a("a-button",{on:{click:t.upFile}},[a("a-icon",{attrs:{type:"upload"}}),t._v("  "+t._s(t.uploadText)+"\n      ")],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.uploadFile,expression:"uploadFile"}],staticClass:"progress"},[a("div",{staticClass:"file-name"},[a("span",[t._v(t._s(t.fileName))])]),a("div",{staticClass:"file-progress"},[a("a-progress",{attrs:{percent:t.percent,size:"small",status:t.status}})],1)]),a("div",{staticClass:"tips"},[a("span",[t._v("只能上传xls/xlsx格式文件，上限500条记录。")]),a("a",{staticClass:"download",attrs:{href:"javascript:;"},on:{click:function(e){t.outputXlsxFile([["收款地址","转账数量","备注"]],[{wch:50},{wch:10},{wch:30}],"转账模板")}}},[t._v("下载转账模板")])]),t.uploadData?a("DataList",{attrs:{dataSource:t.transferList,step:1,currency:t.currency},on:{errorList:t.getErrorList}}):t._e()],1)],1),a("div",{staticClass:"submitBtn"},[a("a-button",{staticClass:"next",attrs:{type:"primary",htmlType:"submit"},on:{click:t.nextHandle}},[t._v("\n          下一步\n        ")]),a("a-button",{attrs:{htmlType:"submit"},on:{click:t.clearHandle}},[t._v("\n          清空\n        ")])],1)],1)},l=[],u=(a("96cf"),a("1da1")),d=(a("28a5"),a("ac6a"),a("456d"),a("7f7f"),a("1146")),f=a.n(d),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"table"},[a("a-list",{attrs:{grid:{gutter:16,column:3},dataSource:t.data},scopedSlots:t._u([{key:"renderItem",fn:function(e,n){return a("a-list-item",{},[a("a-card",{attrs:{title:e.title}},[t._v(t._s(e.value))])],1)}}])}),a("a-table",{attrs:{bordered:"",dataSource:t.dataList,size:"middle",pagination:t.pageObj}},[a("a-table-column",{key:"index",attrs:{title:"序号",dataIndex:"index",align:"center",width:"50px"}}),a("a-table-column",{key:"to_address",attrs:{title:"收款地址",dataIndex:"to_address",align:"center",width:"390px"},scopedSlots:t._u([{key:"default",fn:function(e,n){return[a("span",{class:n.error_address?1===t.step?"red":"gray":""},[t._v("\n          "+t._s(e)+"\n        ")])]}}])}),a("a-table-column",{key:"amount",attrs:{title:"转账数量",dataIndex:"amount",align:"center",width:"120px"},scopedSlots:t._u([{key:"default",fn:function(e,n){return[a("span",{class:n.error_amount?1===t.step?"red":"gray":""},[t._v("\n          "+t._s(e)+"\n        ")])]}}])}),a("a-table-column",{key:"tag",attrs:{title:"备注",dataIndex:"tag",align:"center",width:"93px"}})],1)],1)},m=[];a("a481");function h(t){return Math.floor(t)==t}function v(t){var e={times:1,num:0},a=t<0;if(h(t))return e.num=t,e;var n=b(t)+"",s=n.indexOf("."),r=n.substr(s+1).length,i=Math.pow(10,r),o=parseInt(Math.abs(t)*i+.5,10);return e.times=i,a&&(o=-o),e.num=o,e}function b(t){var e=""+t;return/e/i.test(e)?t.toFixed(18).replace(/\.?0+$/,""):t}function g(t,e,a){var n=v(t),s=v(e),r=n.num,i=s.num,o=n.times,c=s.times,l=o>c?o:c,u=null;switch(a){case"add":return u=o===c?r+i:o>c?r+i*(o/c):r*(c/o)+i,u/l;case"subtract":return u=o===c?r-i:o>c?r-i*(o/c):r*(c/o)-i,u/l;case"multiply":return u=r*i/(o*c),u;case"divide":return u=r/i*(c/o),u}}var y=function(t,e){return g(t,e,"add")},j={props:["dataSource","step","currency"],data:function(){return{dataList:[],data:[{title:"转账总数",value:0},{title:"转账明细",value:0},{title:"收款地址数",value:0}],pageObj:{showQuickJumper:!0},addressLenLimit:{eth:42,other:34}}},watch:{dataSource:function(t){this.dataListHandle(t)},currency:function(t){this.dataListHandle(this.dataSource)}},methods:{dataListHandle:function(t){var e=this,a=0,n=[];if(this.dataList=t.map(function(t,s){var r=t.to_address,i=t.amount[0],o=!1,c=!1,l=e.currency.toLowerCase();return"eth"===l||"erc20"===l?r.length!==e.addressLenLimit.eth&&(o=!0):""!==e.currency&&r.length!==e.addressLenLimit.other&&(o=!0),e.decimalLen(i)>8&&(c=!0),(o||c)&&n.push(s+1),a=y(a,i),{index:s+1,to_address:t.to_address,tag:t.tag,amount:e.getFullNum(i),error_address:o,error_amount:c}}),n.length>0&&1===this.step){var s=this.errListHandle(n)+"条数据";this.$notification["error"]({message:"转账信息异常",description:"请核查第"+s}),this.$emit("errorList",n)}this.data.forEach(function(n){"转账总数"===n.title?n.value=e.sumHandle(a):n.value=t.length})},getFullNum:function(t){var e=""+t;return/e/i.test(e)?t.toFixed(18).replace(/\.?0+$/,""):t},decimalLen:function(t){var e=t+"",a=e.indexOf(".");return-1!==a?e.split(".")[1].length:0},errListHandle:function(t){for(var e=t.length,a=1,n=t[0],s=n,r=[];a<e;a++)s++,s<t[a]&&(--s===n?r.push(n):r.push(n+" ~ "+s),n=t[a],s=n);return r.push(n===s?n:n+" ~ "+s),r.join("、")},sumHandle:function(t){var e=t+"",a=e.indexOf(".");if(-1!==a){var n=e.substring(a,e.length);if(n.length>8)return(t-0).toFixed(8)}return t}}},_=j,C=(a("2e21"),a("2877")),w=Object(C["a"])(_,p,m,!1,null,null,null);w.options.__file="DataList.vue";var x=w.exports,S=a("24b4"),k=a.n(S),L=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a,n,s,r,i,o,c,l,u=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(e=u.length>0&&void 0!==u[0]?u[0]:"",a=u.length>1&&void 0!==u[1]?u[1]:{},n=u.length>2?u[2]:void 0,s=u.length>3&&void 0!==u[3]?u[3]:"GET",r=u.length>4&&void 0!==u[4]?u[4]:"fetch",s=s.toUpperCase(),"GET"==s&&(i="",Object.keys(a).forEach(function(t){i+=t+"="+a[t]+"&"}),""!==i&&(i=i.substr(0,i.lastIndexOf("&")),e=e+"?"+i)),!window.fetch||"fetch"!=r){t.next=28;break}return o={credentials:"include",method:s,headers:{Accept:"application/json, text/html, text/plain","Content-Type":"application/json"},mode:"cors"},"POST"==s&&Object.defineProperty(o,"body",{value:JSON.stringify(a)}),t.prev=10,t.next=13,fetch(e,o);case 13:if(c=t.sent,500!==c.status||!n){t.next=17;break}return S["notification"]["error"]({message:"服务器错误",description:n}),t.abrupt("return");case 17:return t.next=19,c.json();case 19:return l=t.sent,t.abrupt("return",l);case 23:throw t.prev=23,t.t0=t["catch"](10),new Error(t.t0);case 26:t.next=29;break;case 28:return t.abrupt("return",new Promise(function(t,n){var r;window.XMLHttpRequest&&(r=new XMLHttpRequest);var i="";"POST"==s&&(i=JSON.stringify(a)),r.open(s,e,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(i),r.onreadystatechange=function(){if(4==r.readyState){if(500===r.readyState)return;if(200==r.status){var e=r.response;t(e)}else n(r)}}}));case 29:case"end":return t.stop()}},t,this,[[10,23]])})),O=function(t){return L("/api/v1/webtransfer/getcoins",t,"获取币种列表失败，请尝试刷新页面")},N=function(t){return L("/api/v1/webtransfer/gettemplate",t,"获取审批流列表失败, 请尝试重新选择币种")},T=function(t){return L("/api/v1/webtransfer/transfercommit",t,"请重新提交转账信息","POST")},M=function(t){return L("/api/v1/webtransfer/getcommitstatus",t)},z=a("c1df"),$=a.n(z),D={data:function(){return{json_fields:{address:"收款地址",amount:"转账数量",mark:"备注"},json_data:[],json_meta:[[{key:"charset",value:"utf-8"}]],formLayout:"horizontal",balance:0,miner:1,percent:0,status:"active",fileName:"",uploadData:!1,uploadFile:!1,uploadText:"上传",date:null,time:null,reason:void 0,fileValue:null,currencyList:[],templateList:[],currencySelect:void 0,templateSelect:void 0,transferList:[],transferSum:0,currency:"",errorList:[]}},components:{DataList:x},created:function(){this.getCoins()},methods:{currencySelectChange:function(t){this.currencySelect=t,this.templateList=[],this.templateSelect=void 0;var e=this.currencyList[t],a=e.ID;this.currency=e.Currency,this.getTemplates(a)},templateSelectChange:function(t){this.templateSelect=t,this.balance=this.templateList[t].ReferAmount},getErrorList:function(t){this.errorList=t},handleChange:function(t){var e=this,a=t.target.files[0];if(a){this.uploadFile=!0,this.percent=0,this.uploadText="重新上传",this.status="active",this.fileName=a.name;var n=new FileReader;n.onload=function(t){var a=t.target.result;try{var n=f.a.read(a,{type:"binary"}),s=f.a.utils.sheet_to_json(n.Sheets[n.SheetNames[0]]),r=0,i=s.length;if(i>500)return e.$message.error("最多只能上传500条数据，请重新上传"),e.status="exception",void(e.uploadData=!1);if(0===i)return e.$message.error("表格内容为空，请重新上传"),e.status="exception",void(e.uploadData=!1);var o=Object.keys(s[0]).join("");if(-1===o.indexOf("收款地址"))return e.$message.error("表格内容格式错误，请重新上传"),e.status="exception",void(e.uploadData=!1);e.transferList=s.map(function(t,a){var n=t["转账数量"];if(!e.isNum(n-0)||n<1e-8)throw"表格第"+(a+1)+"条数据错误(上传文件中，转账数量不能为空、0、非数字或小于0.00000001)";return r=y(r,n),{to_address:t["收款地址"]||"",tag:t["备注"],amount:[n]}}),e.transferSum=e.sumHandle(r)}catch(c){e.isString(c)?e.$message.error(c):e.$message.error("表格格式或内容错误（只能上传xls/xlsx格式文件，上限500条记录。）"),e.status="exception",e.uploadData=!1}},n.onprogress=function(t){e.percent=parseInt(t.loaded/t.total*100),e.percent>=100&&(e.uploadData=!0,e.status="success")},n.readAsBinaryString(a)}},isString:function(t){return"string"==typeof t&&t.constructor==String},isNum:function(t){return""!==t&&null!==t&&"number"===typeof t&&!isNaN(t)},upFile:function(){this.$refs["file_up"].click()},outputXlsxFile:function(t,e,a){var n=f.a.utils.aoa_to_sheet(t);n["!cols"]=e;var s=f.a.utils.book_new();f.a.utils.book_append_sheet(s,n,a),f.a.writeFile(s,a+".xlsx")},nextHandle:function(){var t={},e=this.currencySelect,a=this.templateSelect,n=this.currencyList[e],s=this.templateList[a];if(void 0!==e)if(void 0!==a){var r=this.reason;if(void 0!==r&&""!==r.trim()){var i,o=this.date,c=this.time;if(i=null===o||null===c?"":$()(this.date).format("YYYY-MM-DD")+" "+$()(this.time).format("HH:mm:ss"),""!==i&&$()(i).valueOf()-+new Date<=0)this.$message.error("截止时间不能早于当前时间，请修改后重试");else{var l=this.transferList;0!==l.length?this.transferSum-0>this.balance-0?this.$message.error("剩余额度不足，无法提交申请！"):this.errorList.length>0?this.$message.error("表格内容错误，无法提交申请！"):(t.currency=n.Currency,t.coin_name=n.Name,t.coin_fullname=n.FullName,t.precise=n.Precise,t.token=n.TokenAddress,t.t_hash=s.Hash,t.reason=r,t.miner=this.miner,t.t_name=s.Name,t.timestamp=+new Date,t.coin_id=n.ID,t.amount=this.transferSum,t.applys=this.transferList,t.deadline=i,window.localStorage.setItem("msg",JSON.stringify(t)),this.$emit("getStatus",!1)):this.$message.error("请上传转账信息（只能上传xls/xlsx格式文件，上限500条记录。）")}}else this.$message.error("请填写申请理由")}else this.$message.error("请选择审批流");else this.$message.error("请选择币种")},decimalLen:function(t){var e=t+"",a=e.indexOf(".");return-1!==a?e.split(".")[1].length:0},clearHandle:function(){this.currencySelect=void 0,this.templateSelect=void 0,this.reason=void 0,this.date=void 0,this.time=void 0,this.miner=1,this.uploadFile=!1,this.uploadData=!1,this.uploadText="上传",this.currency=""},sumHandle:function(t){var e=t+"",a=e.indexOf(".");if(-1!==a){var n=e.substring(a,e.length);if(n.length>8)return(t-0).toFixed(8)}return t},getCoins:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:e=t.sent,0===e.Code&&(this.currencyList=e.Data);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getTemplates:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,N({coin_id:e});case 2:a=t.sent,0===a.Code&&(this.templateList=a.Data);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},H=D,I=(a("8586"),Object(C["a"])(H,c,l,!1,null,null,null));I.options.__file="InputTransfer.vue";var P=I.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isShowCode?a("div",{staticClass:"qrcode",on:{click:t.close}},[a("div",{staticClass:"qrcode-content"},[a("p",[t._v("请打开APP端的“验签转账申请”功能 扫描以下二维码，进行数据验签")]),a("div",{staticClass:"qrcode-img"},[t.timeOut?a("p",{staticClass:"refresh",on:{click:function(e){return e.stopPropagation(),t.refresh(e)}}},[t._v("二维码已失效"),a("br"),t._v("点击刷新")]):t._e(),a("canvas",{ref:"img"})])])]):t._e(),a("div",{staticClass:"transfer-info"},[a("ul",[a("li",[a("span",{staticClass:"label"},[t._v("币种：")]),a("span",[t._v(t._s(t.currencyName))])]),a("li",[a("span",{staticClass:"label"},[t._v("审批流：")]),a("span",[t._v(t._s(t.template))])]),a("li",[a("span",{staticClass:"label"},[t._v("申请理由：")]),a("span",[t._v(t._s(t.reason))])]),a("li",[a("span",{staticClass:"label"},[t._v("截止时间：")]),a("span",[t._v(t._s(t.dateTime))])]),a("li",[a("span",{staticClass:"label"},[t._v("矿工费：")]),a("span",[t._v(t._s(t.miner))])]),a("li",{staticClass:"clear"},[a("span",{staticClass:"label tansfer-list"},[t._v("转账明细：")]),a("div",{staticClass:"data-list"},[a("DataList",{attrs:{dataSource:t.transferList,step:2,currency:t.currency}})],1)]),a("li",{staticClass:"clear item-code"},[a("span",{staticClass:"label fl"},[t._v("验证码：")]),a("div",{staticClass:"code fl clear"},[a("a-input",{staticClass:"fl input-code",model:{value:t.code,callback:function(e){t.code=e},expression:"code"}}),a("s-identify",{staticClass:"fl code-img",attrs:{identifyCode:t.identifyCode}}),a("span",{staticClass:"fl code-refresh",on:{click:t.refreshCode}},[t._v("看不清，换一张")])],1)])]),a("div",{staticClass:"btn"},[a("a-button",{staticClass:"next",attrs:{type:"primary",htmlType:"submit"},on:{click:t.submitTransfer}},[t._v("\n        提交\n      ")]),a("a-button",{attrs:{htmlType:"submit"},on:{click:t.upHandle}},[t._v("\n        上一步\n      ")])],1)])])},E=[],R=(a("6b54"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"s-canvas"},[a("canvas",{attrs:{id:"s-canvas",width:t.contentWidth,height:t.contentHeight}})])}),J=[],A=(a("c5f6"),{name:"SIdentify",props:{identifyCode:{type:String,default:"1234"},fontSizeMin:{type:Number,default:26},fontSizeMax:{type:Number,default:30},backgroundColorMin:{type:Number,default:255},backgroundColorMax:{type:Number,default:255},colorMin:{type:Number,default:50},colorMax:{type:Number,default:160},lineColorMin:{type:Number,default:40},lineColorMax:{type:Number,default:180},dotColorMin:{type:Number,default:0},dotColorMax:{type:Number,default:255},contentWidth:{type:Number,default:103},contentHeight:{type:Number,default:50}},methods:{randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)},randomColor:function(){var t=71,e=171,a=220;return"rgb("+t+","+e+","+a+")"},drawPic:function(){var t=document.getElementById("s-canvas"),e=t.getContext("2d");e.textBaseline="bottom",e.fillStyle="#fff",e.fillRect(0,0,this.contentWidth,this.contentHeight);for(var a=0;a<this.identifyCode.length;a++)this.drawText(e,this.identifyCode[a],a);this.drawLine(e),this.drawDot(e)},drawText:function(t,e,a){t.fillStyle=this.randomColor(this.colorMin,this.colorMax),t.font="400 "+this.randomNum(this.fontSizeMin,this.fontSizeMax)+"px PingFang SC";var n=(a+1)*(this.contentWidth/(this.identifyCode.length+1.5)),s=this.randomNum(this.fontSizeMax,this.contentHeight),r=this.randomNum(-10,10);t.translate(n,s),t.rotate(r*Math.PI/180),t.fillText(e,0,0),t.rotate(-r*Math.PI/180),t.translate(-n,-s)},drawLine:function(t){},drawDot:function(){}},watch:{identifyCode:function(){this.drawPic()}},mounted:function(){this.drawPic()}}),q=A,B=(a("97f8"),Object(C["a"])(q,R,J,!1,null,"488c4f34",null));B.options.__file="Identify.vue";var U=B.exports,V=a("d055"),X=a.n(V),W=a("3452"),Y=a.n(W),G={encrypt:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=Y.a.enc.Utf8.parse(e),n=Y.a.AES.encrypt(t,a,{iv:a,mode:Y.a.mode.CBC,padding:Y.a.pad.Pkcs7});return n.toString()},decrypt:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=Y.a.enc.Utf8.parse(e);try{var n=Y.a.AES.decrypt(t,a,{iv:a,mode:Y.a.mode.CBC,padding:Y.a.pad.Pkcs7});n=Y.a.enc.Utf8.stringify(n);try{return JSON.parse(n)}catch(s){return n}}catch(s){return""}}},K={data:function(){return{identifyCodes:"1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",identifyCode:"",transferList:[],currencyName:"",template:"",reason:"",dateTime:"",miner:"",msg:null,isShowCode:!1,timeOut:!1,timer:null,timerInterval:null,code:"",currency:""}},mounted:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4),this.getData()},methods:{getData:function(){var t=JSON.parse(window.localStorage.getItem("msg"));this.currency=t.currency,this.currencyName=t.coin_name+"("+t.coin_fullname+")",this.template=t.t_name,this.reason=t.reason,this.dateTime=t.deadline;var e=t.miner;this.miner=1===e?"最低":e+"倍",this.transferList=t.applys,this.msg=t},randomNum:function(t,e){return Math.floor(Math.random()*(e-t)+t)},refreshCode:function(){this.identifyCode="",this.makeCode(this.identifyCodes,4)},makeCode:function(t,e){for(var a=0;a<e;a++)this.identifyCode+=t[this.randomNum(0,t.length)]},submitTransfer:function(){if(this.code.toLowerCase()!==this.identifyCode.toLowerCase())return this.$notification["error"]({message:"验证码错误",description:"请重新提交"}),this.identifyCode="",this.code="",void this.makeCode(this.identifyCodes,4);this.transferCommit()},transferCommit:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(){var e,a,n,s,r,i,o=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=this.guid(),a=this.aesKey(),n=JSON.stringify(this.msg),s=G.encrypt(n,a),t.next=6,T({id:e,msg:s});case 6:r=t.sent,0===r.Code?(this.isShowCode=!0,i=JSON.stringify({id:e,aesKey:a}),this.$nextTick(function(){var t=this.$refs["img"];X.a.toCanvas(t,i,{colorDark:"#000000",colorLight:"#ffffff",scale:5},function(t){t&&console.error(t)})}),this.identifyCode="",this.makeCode(this.identifyCodes,4),this.timerInterval=setInterval(function(){o.getStatus(e)},1e3),this.timer=setTimeout(function(){o.timeOut=!0,clearInterval(o.timerInterval)},6e4)):this.$notification["error"]({message:"错误 Code:"+r.Code,description:"请尝试重新提交"});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getStatus:function(){var t=Object(u["a"])(regeneratorRuntime.mark(function t(e){var a,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,M({id:e});case 2:a=t.sent,0===a.Code&&(n=a.Data,2===n.status?(this.clearTimer(),this.$success({title:"批量转账申请提交成功！",content:"",onOk:function(){window.location.reload()}})):3===n.status&&(this.timeOut=!0,this.clearTimer()));case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),upHandle:function(){this.$emit("getStatus",!0)},close:function(){this.isShowCode=!1,this.timeOut=!1,this.clearTimer()},refresh:function(){this.timeOut=!1,this.clearTimer(),this.transferCommit()},clearTimer:function(){clearInterval(this.timerInterval),clearTimeout(this.timer)},S4:function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},aesKey:function(){var t=this.S4;return t()+t()+t()+t()},guid:function(){var t=this.S4;return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}},components:{DataList:x,SIdentify:U}},Q=K,Z=(a("96a9"),Object(C["a"])(Q,F,E,!1,null,"d2e11238",null));Z.options.__file="ViewTransfer.vue";var tt=Z.exports,et={data:function(){return{inputStatus:!0,current:0,steps:[{title:"填写转账信息",index:0},{title:"确认转账信息",index:1},{title:"完成",index:2}]}},methods:{getStatus:function(t){this.current=t?0:1,this.inputStatus=t}},components:{InputTransfer:P,ViewTransfer:tt}},at=et,nt=(a("8621"),Object(C["a"])(at,i,o,!1,null,"c9f8e686",null));nt.options.__file="Home.vue";var st=nt.exports,rt=a("677e"),it=a.n(rt),ot={name:"app",data:function(){return{locale:it.a}},components:{Home:st}},ct=ot,lt=(a("7c55"),Object(C["a"])(ct,s,r,!1,null,null,null));lt.options.__file="App.vue";var ut=lt.exports;a("202f");n["default"].use(k.a),n["default"].config.productionTip=!1,new n["default"]({render:function(t){return t(ut)}}).$mount("#app")},"5c48":function(t,e,a){},"7c55":function(t,e,a){"use strict";var n=a("5c48"),s=a.n(n);s.a},8586:function(t,e,a){"use strict";var n=a("2b63"),s=a.n(n);s.a},8621:function(t,e,a){"use strict";var n=a("355a"),s=a.n(n);s.a},9094:function(t,e,a){},"96a9":function(t,e,a){"use strict";var n=a("9094"),s=a.n(n);s.a},"97f8":function(t,e,a){"use strict";var n=a("2388"),s=a.n(n);s.a},"9b19":function(t,e,a){t.exports=a.p+"img/logo.2a4e9726.svg"},bc30:function(t,e,a){}});
//# sourceMappingURL=app.92b213eb.js.map